@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Index</h1>

<p>
    <a asp-action="Create" class="btn btn-success">Create New</a>
</p>


<table id="employeeTable" class="table">
    <thead>
        <tr>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Salary
            </th>
            <th>
                Department
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

@section Scripts {



    <script>
        $(document).ready(function () {
            @if (TempData["SuccessMessage"] != null)
            {
                <text>
                    Swal.fire({
                        icon: 'success',
                        title: 'Success',
                        text: '@TempData["SuccessMessage"]'
                    });
                </text>
            }

            @if (TempData["LoginSuccess"] != null)
            {
                <text>
                    Swal.fire({
                    icon: 'success',
                    title: 'Success',
                    text: '@TempData["LoginSuccess"]'
                    });
                </text>
            }



            $('#employeeTable').DataTable({
                "processing": true,
                "serverSide": true,
                "filter": true,
                "ajax": {
                    "url": "/Employees/GetEmployees",
                    "type": "POST",
                    "datatype": "json"
                },
                "columnDefs": [{
                    "targets": [0],
                    "visible": true,
                    "searchable": true
                }],
                "columns": [
                    { "data": "firstName", "name": "FirstName", "autoWidth": true },
                    { "data": "lastName", "name": "LastName", "autoWidth": true },
                    { "data": "salary", "name": "Salary", "autoWidth": true },
                    { "data": "department", "name": "Department", "autoWidth": true },
                    {
                        "render": function (data, type, row) {
                            return '<a href="/Employees/Edit/' + row.employeeId + '" class="btn btn-primary">Edit</a> | ' +
                                   '<a href="/Employees/Details/' + row.employeeId + '" class="btn btn-info">Details</a> | ' +
                                   '<a href="/Employees/Delete/' + row.employeeId + '" class="btn btn-danger">Delete</a>';
                        },
                        "orderable": false
                    }
                ]
            });
        });
    </script>
}